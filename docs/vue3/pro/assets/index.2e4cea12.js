
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as J,u as Q,h as W,f as X,j,i as g,b as Y}from"./index.e5f7e690.js";import{g as Z,r as k,z as ee,K as P,L as ae,A as $,i as t,a4 as y,q as f,a3 as S,u as c,h as w,j as E,s as O,C as K,F as q,ab as te,p as se,k as ne,y as d,O as oe,a6 as le,l as D,o as i,w as re,t as M}from"./vendor.ee7254f0.js";const H=_=>(se("data-v-5b9ed54d"),_=_(),ne(),_),ie={class:"container"},ue={key:0,class:"tips"},ce=H(()=>t("div",{class:"tip"},[t("span",null,"Alt"),d("+"),t("span",null,"S"),d(" \u5524\u9192\u641C\u7D22\u9762\u677F ")],-1)),de={class:"tip"},he=d(" \u5207\u6362\u641C\u7D22\u7ED3\u679C "),pe={class:"tip"},ve=d(" \u8BBF\u95EE\u9875\u9762 "),fe=H(()=>t("div",{class:"tip"},[t("span",null,"ESC"),d(" \u9000\u51FA ")],-1)),_e=["href","target","onClick","onMouseover"],be={class:"icon"},me={class:"info"},ge={class:"title"},ke={class:"breadcrumb"},$e={class:"path"},ye=Z({name:"Search"}),Se=Object.assign(ye,{setup(_){const{proxy:s}=oe(),b=Q(),U=W(),z=X(),m=le("generateI18nTitle"),u=k(!1),h=k(""),N=k([]),n=k(-1),p=ee(()=>{let a=[];return a=N.value.filter(e=>{let r=!1;return m(e.i18n,e.title).indexOf(h.value)>=0&&(r=!0),e.path.indexOf(h.value)>=0&&(r=!0),e.breadcrumb.some(o=>m(o.i18n,o.title).indexOf(h.value)>=0)&&(r=!0),r}),a});P(()=>u.value,a=>{a?(document.querySelector("body").classList.add("hidden"),s.$refs.search.scrollTop=0,s.$hotkeys("up",C),s.$hotkeys("down",x),s.$hotkeys("enter",I),setTimeout(()=>{s.$refs.input.$el.children[0].focus()},100)):(document.querySelector("body").classList.remove("hidden"),s.$hotkeys.unbind("up",C),s.$hotkeys.unbind("down",x),s.$hotkeys.unbind("enter",I),setTimeout(()=>{h.value="",n.value=-1},500))}),P(()=>p.value,()=>{n.value=-1,L(0)}),ae(()=>{s.$eventBus.on("global-search-toggle",()=>{u.value=!u.value}),s.$hotkeys("alt+s",a=>{b.toolbar.enableNavSearch&&(a.preventDefault(),u.value=!0)}),b.app.routeBaseOn!=="filesystem"?U.routes.map(a=>{B(a.children)}):z.menus.map(a=>{B(a.children)})});function A(a){let e=!0;return a.children?a.children.every(r=>r.meta.sidebar===!1)&&(e=!1):e=!1,e}function B(a){a.map(e=>{if(e.meta.sidebar!==!1)if(A(e)){let r=e.meta.baseBreadcrumb?j(e.meta.baseBreadcrumb):[];r.push({title:e.meta.title,i18n:e.meta.i18n});let o=j(e.children);o.map(v=>{v.meta.baseIcon=e.meta.icon||e.meta.baseIcon,v.meta.baseBreadcrumb=r,v.meta.basePath=e.meta.basePath?[e.meta.basePath,e.path].join("/"):e.path}),B(o)}else{let r=[];e.meta.baseBreadcrumb&&(r=j(e.meta.baseBreadcrumb)),r.push({title:e.meta.title,i18n:e.meta.i18n});let o="";g(e.path)?o=e.path:o=e.meta.basePath?[e.meta.basePath,e.path].join("/"):e.path,N.value.push({icon:e.meta.icon||e.meta.baseIcon,title:e.meta.title,i18n:e.meta.i18n,breadcrumb:r,path:o,isExternalLink:g(e.path)})}})}function C(){p.value.length&&(n.value-=1,n.value<0&&(n.value=p.value.length-1),L(s.$refs[`search-item-${n.value}`][0].offsetTop))}function x(){p.value.length&&(n.value+=1,n.value>p.value.length-1&&(n.value=0),L(s.$refs[`search-item-${n.value}`][0].offsetTop))}function I(){n.value!==-1&&s.$refs[`search-item-${n.value}`][0].click()}function L(a){n.value!==-1&&(a+s.$refs[`search-item-${n.value}`][0].clientHeight>s.$refs.search.scrollTop+s.$refs.search.clientHeight||a+s.$refs[`search-item-${n.value}`][0].clientHeight<=s.$refs.search.scrollTop)&&s.$refs.search.scrollTo({top:a,behavior:"smooth"})}return(a,e)=>{const r=D("el-input"),o=Y,v=D("router-link");return i(),$(te,{to:"#app"},[t("div",{id:"search",class:O({searching:u.value}),onClick:e[3]||(e[3]=l=>u.value&&a.$eventBus.emit("global-search-toggle"))},[t("div",ie,[t("div",{class:"search-box",onClick:e[2]||(e[2]=y(()=>{},["stop"]))},[f(r,{ref:"input",modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),"prefix-icon":"el-icon-search",placeholder:"\u641C\u7D22\u9875\u9762\uFF0C\u652F\u6301\u6807\u9898\u3001URL\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeydown:[e[1]||(e[1]=S(l=>a.$eventBus.emit("global-search-toggle"),["esc"])),S(y(C,["prevent"]),["up"]),S(y(x,["prevent"]),["down"]),S(y(I,["prevent"]),["enter"])]},null,8,["modelValue","onKeydown"]),c(b).mode==="pc"?(i(),w("div",ue,[ce,t("div",de,[t("span",null,[f(o,{name:"search-up"})]),t("span",null,[f(o,{name:"search-down"})]),he]),t("div",pe,[t("span",null,[f(o,{name:"search-enter"})]),ve]),fe])):E("v-if",!0)]),t("div",{ref:"search",class:O(["result",{mobile:c(b).mode==="mobile"}])},[(i(!0),w(q,null,K(c(p),(l,T)=>(i(),$(v,{key:l.path,custom:"",to:u.value?l.path:""},{default:re(({href:F,navigate:R})=>[t("a",{ref_for:!0,ref:`search-item-${T}`,href:c(g)(l.path)?l.path:F,class:O(["item",{actived:T===n.value}]),target:c(g)(l.path)?"_blank":"_self",onClick:R,onMouseover:V=>n.value=T},[t("div",be,[l.icon?(i(),$(o,{key:0,name:l.icon},null,8,["name"])):E("v-if",!0)]),t("div",me,[t("div",ge,[d(M(c(m)(l.i18n,l.title))+" ",1),l.isExternalLink?(i(),$(o,{key:0,name:"external-link"})):E("v-if",!0)]),t("div",ke,[(i(!0),w(q,null,K(l.breadcrumb,(V,G)=>(i(),w("span",{key:G},[d(M(c(m)(V.i18n,V.title))+" ",1),f(o,{name:"el-icon-arrow-right"})]))),128))]),t("div",$e,M(l.path),1)])],42,_e)]),_:2},1032,["to"]))),128))],2)])],2)])}}});var Ce=J(Se,[["__scopeId","data-v-5b9ed54d"]]);export{Ce as default};
