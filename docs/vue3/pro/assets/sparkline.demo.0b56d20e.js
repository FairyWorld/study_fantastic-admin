
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as t,b as e,n as o,o as l}from"./index.2c18650f.js";import{g as a,aC as s,r,L as i,o as n,h as u,a0 as p,a1 as c,x as f,t as d,j as v,O as h,q as b,w as k}from"./vendor.9da56f98.js";function x(t,e,o,l){return parseFloat((e-l*e/t+o).toFixed(2))}function m(t){return t.value}function y(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(let l in e)o.setAttribute(l,e[l]);return o}const w={class:"sparkline"},g=["width","height","stroke-width","stroke","fill"],C=a({name:"Sparkline"});var $=t(Object.assign(C,{props:{value:{type:Array,require:!0},width:{type:Number,default:100},height:{type:Number,default:30},strokeWidth:{type:Number,default:3},strokeColor:{type:String,default:"#dc2b33"},fillColor:{type:String,default:"transparent"},cursorColor:{type:String,default:"#dc2b33"},spotColor:{type:String,default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){const e=t;s((e=>({"7fa0e63a":t.cursorColor,"5179a837":t.spotColor})));const{proxy:o}=h(),l=r({show:!1,content:"",top:0,left:0});return i((()=>{!function(t,e,o){if(function(t){[...t.querySelectorAll("*")].forEach((e=>t.removeChild(e)))}(t),e.length<=1)return;o=o||{},"number"==typeof e[0]&&(e=e.map((t=>({value:t}))));const l=o.onmousemove,a=o.onmouseout,s="interactive"in o?o.interactive:!!l,r=o.spotRadius||2,i=2*r,n=o.cursorWidth||2,u=parseFloat(t.attributes["stroke-width"].value),p=o.fetch||m,c=e.map((t=>p(t))),f=parseFloat(t.attributes.width.value)-2*i,d=parseFloat(t.attributes.height.value),v=d-2*u-i,h=Math.max(...c),b=-1e3,k=c.length-1,w=f/k,g=[],C=x(h,v,u+r,c[0]);let $=`M${i} ${C}`;c.forEach(((t,o)=>{const l=o*w+i,a=x(h,v,u+r,t);g.push(Object.assign({},e[o],{index:o,x:l,y:a})),$+=` L ${l} ${a}`}));const A=y("path",{class:"sparkline--line",d:$,fill:"none"}),S=y("path",{class:"sparkline--fill",d:`${$} V ${d} L ${i} ${d} Z`,stroke:"none"});if(t.appendChild(S),t.appendChild(A),!s)return;const j=y("line",{class:"sparkline--cursor",x1:b,x2:b,y1:0,y2:d,"stroke-width":n}),E=y("circle",{class:"sparkline--spot",cx:b,cy:b,r:r});t.appendChild(j),t.appendChild(E);const F=y("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(F),F.addEventListener("mouseout",(t=>{j.setAttribute("x1",b),j.setAttribute("x2",b),E.setAttribute("cx",b),a&&a(t)})),F.addEventListener("mousemove",(t=>{const e=t.offsetX;let o=g.find((t=>t.x>=e));o||(o=g[k]);let a,s,r=g[g.indexOf(o)-1];r?(s=r.x+(o.x-r.x)/2,a=e>=s?o:r):a=o;const i=a.x,n=a.y;E.setAttribute("cx",i),E.setAttribute("cy",n),j.setAttribute("x1",i),j.setAttribute("x2",i),l&&l(t,a)}))}(o.$refs.sparklineRef,e.value,e.tooltip&&{onmousemove:(t,e)=>{l.value.show=!0,l.value.content=e.tooltip,l.value.top=t.offsetY,l.value.left=t.offsetX+20},onmouseout:()=>{l.value.show=!1}})})),(e,o)=>(n(),u("div",w,[(n(),u("svg",{ref:"sparklineRef",width:t.width,height:t.height,"stroke-width":t.strokeWidth,stroke:t.strokeColor,fill:t.fillColor},null,8,g)),t.tooltip?p((n(),u("span",{key:0,class:"tooltip",style:f([`left: ${l.value.left}px`,`top: ${l.value.top}px`])},d(l.value.content),5)),[[c,l.value.show]]):v("v-if",!0)]))}}),[["__scopeId","data-v-28a4eb86"]]);const A={data:()=>({value1:[1,5,2,4,8,3,7],value2:[{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]})};"function"==typeof e&&e(A);var S=t(A,[["render",function(t,e,a,s,r,i){const p=l,c=$,f=o;return n(),u("div",null,[b(p,{title:"迷你图",content:"Sparkline"}),b(f,null,{default:k((()=>[b(c,{value:r.value1},null,8,["value"]),b(c,{value:r.value1,"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),b(c,{value:r.value2,tooltip:""},null,8,["value"]),b(c,{value:r.value2,tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])])),_:1})])}]]);export{S as default};
