
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e,c as t}from"./index.2c18650f.js";import{g as i,r as s,l,o as a,h as r,q as n,w as o,A as p,i as c,x as u,a4 as d,a0 as g,a1 as h,j as f,O as m}from"./vendor.9da56f98.js";const v={class:"upload-container"},y={class:"image-slot"},w={key:1,class:"image"},x={class:"mask"},$={class:"actions"},b=["onClick"],j=["onClick"],k={key:0,class:"el-upload__tip"},_={style:{display:"inline-block"}},V=i({name:"ImageUpload"});var z=e(Object.assign(V,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(e,{emit:i}){const V=e,{proxy:z}=m(),O=s({imageViewerVisible:!1,progress:{preview:"",percent:0}});function C(){O.value.imageViewerVisible=!0}function S(){O.value.imageViewerVisible=!1}function B(){i("update:url","")}function M(e){const t=e.name.split("."),i=t[t.length-1],s=V.ext.indexOf(i)>=0,l=e.size/1024/1024<V.size;return s||z.$message.error(`上传图片只支持 ${V.ext.join(" / ")} 格式！`),l||z.$message.error(`上传图片大小不能超过 ${V.size}MB！`),s&&l&&(O.value.progress.preview=URL.createObjectURL(e)),s&&l}function N(e){O.value.progress.percent=~~e.percent}function U(e){O.value.progress.preview="",O.value.progress.percent=0,i("on-success",e)}return(i,s)=>{const m=t,V=l("el-image"),z=l("el-icon-zoom-in"),q=l("el-icon"),A=l("el-icon-delete"),I=l("el-progress"),L=l("el-upload"),R=l("el-alert"),D=l("el-image-viewer");return a(),r("div",v,[n(L,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":M,"on-progress":N,"on-success":U,drag:""},{default:o((()=>[""===e.url?(a(),p(V,{key:0,src:""===e.url?e.placeholder:e.url,style:u(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},{error:o((()=>[c("div",y,[n(m,{name:"el-icon-plus"})])])),_:1},8,["src","style"])):(a(),r("div",w,[n(V,{src:e.url,style:u(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),c("div",x,[c("div",$,[c("span",{title:"预览",onClick:d(C,["stop"])},[n(q,null,{default:o((()=>[n(z)])),_:1})],8,b),c("span",{title:"移除",onClick:d(B,["stop"])},[n(q,null,{default:o((()=>[n(A)])),_:1})],8,j)])])])),g(c("div",{class:"progress",style:u(`width:${e.width}px;height:${e.height}px;`)},[n(V,{src:O.value.progress.preview,style:u(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),n(I,{type:"circle",width:.8*Math.min(e.width,e.height),percentage:O.value.progress.percent},null,8,["width","percentage"])],4),[[h,""===e.url&&O.value.progress.percent]])])),_:1},8,["headers","action","data","name"]),e.notip?f("v-if",!0):(a(),r("div",k,[c("div",_,[n(R,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，且图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),O.value.imageViewerVisible?(a(),p(D,{key:1,"url-list":[e.url],onClose:S},null,8,["url-list"])):f("v-if",!0)])}}}),[["__scopeId","data-v-5442efad"]]);export{z as _};
