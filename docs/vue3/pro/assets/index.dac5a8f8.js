
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e,d as a,u as t,X as s,N as l,r as n,D as i,L as r,o,Y as c,h as u,e as h,y as m,b as v,x as d,g as p,c as b,i as f,O as $,G as g,H as k,Z as y,p as x,k as B,z as T,C as w,F as _,U as C,n as L,q as O,w as S,t as I,B as P}from"./index.87af0725.js";const j=e=>(x("data-v-59a61cb2"),e=e(),B(),e),H={class:"container"},q={key:0,class:"tips"},E=j((()=>h("div",{class:"tip"},[h("span",null,"Alt"),T("+"),h("span",null,"S"),T(" 唤醒搜索面板 ")],-1))),U={class:"tip"},V=T(" 切换搜索结果 "),D={class:"tip"},K=T(" 访问页面 "),M=j((()=>h("div",{class:"tip"},[h("span",null,"ESC"),T(" 退出 ")],-1))),N=["href","target","onClick","onMouseover"],z={class:"icon"},A={class:"info"},F={class:"title"},G={class:"breadcrumb"},R={class:"path"},X=a({name:"Search"});var Y=e(Object.assign(X,{setup(e){const{proxy:a}=w(),x=t(),B=s(),j=l(),X=_("generateI18nTitle"),Y=n(!1),Z=n(""),J=n([]),Q=n(-1),W=i((()=>{let e=[];return e=J.value.filter((e=>{let a=!1;return X(e.i18n,e.title).indexOf(Z.value)>=0&&(a=!0),e.path.indexOf(Z.value)>=0&&(a=!0),e.breadcrumb.some((e=>X(e.i18n,e.title).indexOf(Z.value)>=0))&&(a=!0),a})),e}));function ee(e){e.map((e=>{if(!1!==e.meta.sidebar)if(function(e){let a=!0;return e.children?e.children.every((e=>!1===e.meta.sidebar))&&(a=!1):a=!1,a}(e)){let a=e.meta.baseBreadcrumb?c(e.meta.baseBreadcrumb):[];a.push({title:e.meta.title,i18n:e.meta.i18n});let t=c(e.children);t.map((t=>{t.meta.baseIcon=e.meta.icon||e.meta.baseIcon,t.meta.baseBreadcrumb=a,t.meta.basePath=e.meta.basePath?[e.meta.basePath,e.path].join("/"):e.path})),ee(t)}else{let a=[];e.meta.baseBreadcrumb&&(a=c(e.meta.baseBreadcrumb)),a.push({title:e.meta.title,i18n:e.meta.i18n});let t="";t=C(e.path)?e.path:e.meta.basePath?[e.meta.basePath,e.path].join("/"):e.path,J.value.push({icon:e.meta.icon||e.meta.baseIcon,title:e.meta.title,i18n:e.meta.i18n,breadcrumb:a,path:t,isExternalLink:C(e.path)})}}))}function ae(){W.value.length&&(Q.value-=1,Q.value<0&&(Q.value=W.value.length-1),le(a.$refs[`search-item-${Q.value}`][0].offsetTop))}function te(){W.value.length&&(Q.value+=1,Q.value>W.value.length-1&&(Q.value=0),le(a.$refs[`search-item-${Q.value}`][0].offsetTop))}function se(){-1!==Q.value&&a.$refs[`search-item-${Q.value}`][0].click()}function le(e){-1!==Q.value&&(e+a.$refs[`search-item-${Q.value}`][0].clientHeight>a.$refs.search.scrollTop+a.$refs.search.clientHeight||e+a.$refs[`search-item-${Q.value}`][0].clientHeight<=a.$refs.search.scrollTop)&&a.$refs.search.scrollTo({top:e,behavior:"smooth"})}return r((()=>Y.value),(e=>{e?(document.querySelector("body").classList.add("hidden"),a.$refs.search.scrollTop=0,a.$hotkeys("up",ae),a.$hotkeys("down",te),a.$hotkeys("enter",se),setTimeout((()=>{a.$refs.input.$el.children[0].focus()}),100)):(document.querySelector("body").classList.remove("hidden"),a.$hotkeys.unbind("up",ae),a.$hotkeys.unbind("down",te),a.$hotkeys.unbind("enter",se),setTimeout((()=>{Z.value="",Q.value=-1}),500))})),r((()=>W.value),(()=>{Q.value=-1,le(0)})),o((()=>{a.$eventBus.on("global-search-toggle",(()=>{Y.value=!Y.value})),a.$hotkeys("alt+s",(e=>{x.toolbar.enableNavSearch&&(e.preventDefault(),Y.value=!0)})),"filesystem"!==x.app.routeBaseOn?B.routes.map((e=>{ee(e.children)})):j.menus.map((e=>{ee(e.children)}))})),(e,a)=>{const t=L("el-input"),s=P,l=L("router-link");return O(),u(y,{to:"#app"},[h("div",{id:"search",class:$({searching:Y.value}),onClick:a[3]||(a[3]=a=>Y.value&&e.$eventBus.emit("global-search-toggle"))},[h("div",H,[h("div",{class:"search-box",onClick:a[2]||(a[2]=m((()=>{}),["stop"]))},[v(t,{ref:"input",modelValue:Z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Z.value=e),"prefix-icon":"el-icon-search",placeholder:"搜索页面，支持标题、URL模糊查询",clearable:"",onKeydown:[a[1]||(a[1]=d((a=>e.$eventBus.emit("global-search-toggle")),["esc"])),d(m(ae,["prevent"]),["up"]),d(m(te,["prevent"]),["down"]),d(m(se,["prevent"]),["enter"])]},null,8,["modelValue","onKeydown"]),"pc"===p(x).mode?(O(),b("div",q,[E,h("div",U,[h("span",null,[v(s,{name:"search-up"})]),h("span",null,[v(s,{name:"search-down"})]),V]),h("div",D,[h("span",null,[v(s,{name:"search-enter"})]),K]),M])):f("v-if",!0)]),h("div",{ref:"search",class:$(["result",{mobile:"mobile"===p(x).mode}])},[(O(!0),b(k,null,g(p(W),((e,a)=>(O(),u(l,{key:e.path,custom:"",to:Y.value?e.path:""},{default:S((({href:t,navigate:l})=>[h("a",{ref_for:!0,ref:`search-item-${a}`,href:p(C)(e.path)?e.path:t,class:$(["item",{actived:a===Q.value}]),target:p(C)(e.path)?"_blank":"_self",onClick:l,onMouseover:e=>Q.value=a},[h("div",z,[e.icon?(O(),u(s,{key:0,name:e.icon},null,8,["name"])):f("v-if",!0)]),h("div",A,[h("div",F,[T(I(p(X)(e.i18n,e.title))+" ",1),e.isExternalLink?(O(),u(s,{key:0,name:"external-link"})):f("v-if",!0)]),h("div",G,[(O(!0),b(k,null,g(e.breadcrumb,((e,a)=>(O(),b("span",{key:a},[T(I(p(X)(e.i18n,e.title))+" ",1),v(s,{name:"el-icon-arrow-right"})])))),128))]),h("div",R,I(e.path),1)])],42,N)])),_:2},1032,["to"])))),128))],2)])],2)])}}}),[["__scopeId","data-v-59a61cb2"]]);export{Y as default};
