
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as O}from"./index.d8082f89.js";import{j as U,r as M,D as s,o as c,l as g,F as i,A as d,z as _,m as o,G as u,_ as y,U as D,V as I,q as w,H as q}from"./vendor.d1c84aa2.js";import{_ as A}from"./index.8f12b84b.js";const E={class:"upload-container"},L={class:"image-slot"},R={key:1,class:"image"},F={class:"mask"},G={class:"actions"},H=["onClick"],P=["onClick"],T={key:0,class:"el-upload__tip"},J={style:{display:"inline-block"}},K=U({name:"ImageUpload"}),Q=Object.assign(K,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(e,{emit:f}){const r=e,{proxy:p}=q(),t=M({imageViewerVisible:!1,progress:{preview:"",percent:0}});function x(){t.value.imageViewerVisible=!0}function b(){t.value.imageViewerVisible=!1}function $(){f("update:url","")}function k(n){const h=n.name.split("."),m=h[h.length-1],l=r.ext.indexOf(m)>=0,a=n.size/1024/1024<r.size;return l||p.$message.error(`\u4E0A\u4F20\u56FE\u7247\u53EA\u652F\u6301 ${r.ext.join(" / ")} \u683C\u5F0F\uFF01`),a||p.$message.error(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${r.size}MB\uFF01`),l&&a&&(t.value.progress.preview=URL.createObjectURL(n)),l&&a}function V(n){t.value.progress.percent=~~n.percent}function C(n){t.value.progress.preview="",t.value.progress.percent=0,f("on-success",n)}return(n,h)=>{const m=O,l=s("el-image"),a=s("el-icon-zoom-in"),v=s("el-icon"),z=s("el-icon-delete"),j=s("el-progress"),S=s("el-upload"),B=s("el-alert"),N=s("el-image-viewer");return c(),g("div",E,[i(S,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":k,"on-progress":V,"on-success":C,drag:""},{default:d(()=>[e.url===""?(c(),_(l,{key:0,src:e.url===""?e.placeholder:e.url,style:u(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},{error:d(()=>[o("div",L,[i(m,{name:"el-icon-plus"})])]),_:1},8,["src","style"])):(c(),g("div",R,[i(l,{src:e.url,style:u(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),o("div",F,[o("div",G,[o("span",{title:"\u9884\u89C8",onClick:y(x,["stop"])},[i(v,null,{default:d(()=>[i(a)]),_:1})],8,H),o("span",{title:"\u79FB\u9664",onClick:y($,["stop"])},[i(v,null,{default:d(()=>[i(z)]),_:1})],8,P)])])])),D(o("div",{class:"progress",style:u(`width:${e.width}px;height:${e.height}px;`)},[i(l,{src:t.value.progress.preview,style:u(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),i(j,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:t.value.progress.percent},null,8,["width","percentage"])],4),[[I,e.url===""&&t.value.progress.percent]])]),_:1},8,["headers","action","data","name"]),e.notip?w("v-if",!0):(c(),g("div",T,[o("div",J,[i(B,{title:`\u4E0A\u4F20\u56FE\u7247\u652F\u6301 ${e.ext.join(" / ")} \u683C\u5F0F\uFF0C\u4E14\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC7 ${e.size}MB\uFF0C\u5EFA\u8BAE\u56FE\u7247\u5C3A\u5BF8\u4E3A ${e.width}*${e.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),t.value.imageViewerVisible?(c(),_(N,{key:1,"url-list":[e.url],onClose:b},null,8,["url-list"])):w("v-if",!0)])}}});var Z=A(Q,[["__scopeId","data-v-bbca8d8c"]]);export{Z as _};
