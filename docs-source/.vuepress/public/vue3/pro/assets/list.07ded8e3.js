
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e,b as a,n as l,o as t}from"./index.2c18650f.js";import{_ as o}from"./index.6643e359.js";import{_ as i}from"./index.9e821b92.js";import{g as s,r as n,L as r,ai as d,h as u,q as c,w as p,A as m,j as f,O as g,a2 as v,l as h,an as b,o as _,a3 as y,a0 as C,u as x,y as k}from"./vendor.9da56f98.js";import{u as w}from"./usePagination.3fb54251.js";import z from"./index.eeed0e21.js";import"./index.06d56888.js";import"./index.442bda72.js";import"./index.eb17c7b3.js";const M=k("新增运费模版"),$=k("筛 选"),L=k("单个批量操作按钮"),j=k("批量操作按钮组1"),P=k("批量操作按钮组2"),S=k("编辑"),V=k("删除"),U=s({name:"PagesExampleDeliveryList"}),D=Object.assign(U,{setup(e){const{pagination:a,getParams:s,onSizeChange:k,onCurrentChange:U,onSortChange:D}=w(),{proxy:E}=g(),A=v(),R=n({loading:!1,formMode:"router",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});function B(){R.value.loading=!0;let e=s();R.value.search.title&&(e.title=R.value.search.title),E.$api.get("pages_example/delivery/list",{baseURL:"/mock/",params:e}).then((e=>{R.value.loading=!1,R.value.dataList=e.data.list,a.value.total=e.data.total}))}function O(e){k(e).then((()=>B()))}function q(e=1){U(e).then((()=>B()))}function I(e,a){D(e,a).then((()=>B()))}function K(){"router"===R.value.formMode?A.push({name:"pagesExampleShopDeliveryCreate"}):(R.value.formModeProps.id="",R.value.formModeProps.visible=!0)}return r((()=>{B(),"router"===R.value.formMode&&E.$eventBus.on("get-data-list",(()=>{B()}))})),d((()=>{"router"===R.value.formMode&&E.$eventBus.off("get-data-list")})),(e,s)=>{const n=t,r=h("el-button"),d=h("el-input"),g=h("el-form-item"),v=h("el-col"),k=h("el-row"),w=h("el-form"),U=i,D=h("el-button-group"),N=o,F=h("el-table-column"),G=h("el-switch"),H=h("el-table"),J=h("el-pagination"),Q=l,T=b("loading");return _(),u("div",null,[c(n,{title:"运费模版管理"}),c(Q,null,{default:p((()=>[c(r,{type:"primary",size:"large",icon:"el-icon-plus",onClick:K},{default:p((()=>[M])),_:1}),c(U,null,{default:p((()=>[c(w,{model:R.value.search,size:"default","label-width":"100px","label-suffix":"："},{default:p((()=>[c(k,null,{default:p((()=>[c(v,{span:12},{default:p((()=>[c(g,{label:"模版名称"},{default:p((()=>[c(d,{modelValue:R.value.search.title,"onUpdate:modelValue":s[0]||(s[0]=e=>R.value.search.title=e),placeholder:"请输入模版名称，支持模糊查询",clearable:"",onKeydown:s[1]||(s[1]=y((e=>q()),["enter"])),onClear:s[2]||(s[2]=e=>q())},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(g,null,{default:p((()=>[c(r,{type:"primary",icon:"el-icon-search",onClick:s[3]||(s[3]=e=>q())},{default:p((()=>[$])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),R.value.batch.enable?(_(),m(N,{key:0,data:e.dataList,"selection-data":R.value.batch.selectionDataList,onCheckAll:s[4]||(s[4]=a=>e.$refs.table.toggleAllSelection()),onCheckNull:s[5]||(s[5]=a=>e.$refs.table.clearSelection())},{default:p((()=>[c(r,{size:"default"},{default:p((()=>[L])),_:1}),c(D,null,{default:p((()=>[c(r,{size:"default"},{default:p((()=>[j])),_:1}),c(r,{size:"default"},{default:p((()=>[P])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):f("v-if",!0),C((_(),m(H,{ref:"table",class:"list-table",data:R.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:I,onSelectionChange:s[6]||(s[6]=e=>R.value.batch.selectionDataList=e)},{default:p((()=>[R.value.batch.enable?(_(),m(F,{key:0,type:"selection",width:"40"})):f("v-if",!0),c(F,{prop:"title",label:"模版名称"}),c(F,{label:"开启状态",width:"100",align:"center"},{default:p((e=>[c(G,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,onChange:a=>{return l=a,t=e.row,void E.$confirm(`确认${l?"启用":"停用"}「${t.title}」运费模版吗？`,"确认信息").then((()=>{E.$api.post("pages_example/delivery/change/status",{id:t.id,status:l},{baseURL:"/mock/"}).then((()=>{E.$message.success({message:`模拟${l?"启用":"停用"}成功`,center:!0})}))})).catch((()=>{t.status=!l}));var l,t}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),c(F,{label:"操作",width:"250",align:"center"},{default:p((e=>[c(r,{type:"primary",size:"small",plain:"",onClick:a=>{return l=e.row,void("router"===R.value.formMode?A.push({name:"pagesExampleShopDeliveryEdit",params:{id:l.id}}):(R.value.formModeProps.id=l.id,R.value.formModeProps.visible=!0));var l}},{default:p((()=>[S])),_:2},1032,["onClick"]),c(r,{type:"danger",size:"small",plain:"",onClick:a=>{return l=e.row,void E.$confirm(`确认删除「${l.title}」吗？`,"确认信息").then((()=>{E.$api.post("pages_example/delivery/delete",{id:l.id},{baseURL:"/mock/"}).then((()=>{B(),E.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var l}},{default:p((()=>[V])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[T,R.value.loading]]),c(J,{"current-page":x(a).page,total:x(a).total,"page-size":x(a).size,"page-sizes":x(a).sizes,layout:x(a).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:O,onCurrentChange:q},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(R.value.formMode)?(_(),m(z,{key:0,id:R.value.formModeProps.id,modelValue:R.value.formModeProps.visible,"onUpdate:modelValue":s[7]||(s[7]=e=>R.value.formModeProps.visible=e),mode:R.value.formMode,onSuccess:B},null,8,["id","modelValue","mode"])):f("v-if",!0)])}}});"function"==typeof a&&a(D);var E=e(D,[["__scopeId","data-v-1bece460"]]);export{E as default};
