
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e,b as a,o as t,n as l}from"./index.2c18650f.js";import{_ as o}from"./index.6643e359.js";import{_ as i}from"./index.9e821b92.js";import{g as n,r as s,L as r,ai as d,h as u,q as p,w as m,A as c,j as f,O as g,M as v,a2 as b,l as h,an as _,o as C,a3 as y,a0 as k,u as M,y as z}from"./vendor.9da56f98.js";import{u as x}from"./usePagination.3fb54251.js";import $ from"./index.e013190f.js";import"./index.95ec2f82.js";const L=z("返回"),j=z("新增职位"),w=z("筛 选"),P=z("单个批量操作按钮"),S=z("批量操作按钮组1"),V=z("批量操作按钮组2"),U=z("编辑"),D=z("删除"),E=n({name:"PagesExampleDepartmentJobList"}),A=Object.assign(E,{setup(e){const{pagination:a,getParams:n,onSizeChange:z,onCurrentChange:E,onSortChange:A}=x(),{proxy:J}=g(),R=v(),B=b(),G=s({loading:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],department:""});function O(){G.value.loading=!0;let e=n();e.department_id=R.params.department_id,G.value.search.title&&(e.title=G.value.search.title),J.$api.get("pages_example/job/list",{baseURL:"/mock/",params:e}).then((e=>{G.value.loading=!1,G.value.dataList=e.data.list,a.value.total=e.data.total}))}function q(e){z(e).then((()=>O()))}function I(e=1){E(e).then((()=>O()))}function K(e,a){A(e,a).then((()=>O()))}function N(){"router"===G.value.formMode?B.push({name:"pagesExampleGeneralJobCreate",params:{department_id:R.params.department_id}}):(G.value.formModeProps.id="",G.value.formModeProps.visible=!0)}return r((()=>{J.$api.get("pages_example/department/detail",{baseURL:"/mock/",params:{id:R.params.department_id}}).then((e=>{G.value.department=e.data.title})),O(),"router"===G.value.formMode&&J.$eventBus.on("get-data-list",(()=>{O()}))})),d((()=>{"router"===G.value.formMode&&J.$eventBus.off("get-data-list")})),(e,n)=>{const s=h("el-button"),r=t,d=h("el-input"),g=h("el-form-item"),v=h("el-col"),b=h("el-row"),z=h("el-form"),x=i,E=h("el-button-group"),A=o,F=h("el-table-column"),H=h("el-table"),Q=h("el-pagination"),T=l,W=_("loading");return C(),u("div",null,[p(r,{title:`「${G.value.department}」职位管理`,content:"页面数据为 Mock 示例数据，非真实数据。"},{default:m((()=>[p(s,{icon:"el-icon-arrow-left",size:"small",round:"",onClick:n[0]||(n[0]=a=>e.$router.go(-1))},{default:m((()=>[L])),_:1})])),_:1},8,["title"]),p(T,null,{default:m((()=>[p(s,{type:"primary",size:"large",icon:"el-icon-plus",onClick:N},{default:m((()=>[j])),_:1}),p(x,null,{default:m((()=>[p(z,{model:G.value.search,size:"default","label-width":"100px","label-suffix":"："},{default:m((()=>[p(b,null,{default:m((()=>[p(v,{span:12},{default:m((()=>[p(g,{label:"职位"},{default:m((()=>[p(d,{modelValue:G.value.search.title,"onUpdate:modelValue":n[1]||(n[1]=e=>G.value.search.title=e),placeholder:"请输入职位名称，支持模糊查询",clearable:"",onKeydown:n[2]||(n[2]=y((e=>I()),["enter"])),onClear:n[3]||(n[3]=e=>I())},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),p(g,null,{default:m((()=>[p(s,{type:"primary",icon:"el-icon-search",onClick:n[4]||(n[4]=e=>I())},{default:m((()=>[w])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),G.value.batch.enable?(C(),c(A,{key:0,data:G.value.dataList,"selection-data":G.value.batch.selectionDataList,onCheckAll:n[5]||(n[5]=a=>e.$refs.table.toggleAllSelection()),onCheckNull:n[6]||(n[6]=a=>e.$refs.table.clearSelection())},{default:m((()=>[p(s,{size:"default"},{default:m((()=>[P])),_:1}),p(E,null,{default:m((()=>[p(s,{size:"default"},{default:m((()=>[S])),_:1}),p(s,{size:"default"},{default:m((()=>[V])),_:1})])),_:1})])),_:1},8,["data","selection-data"])):f("v-if",!0),k((C(),c(H,{ref:"table",class:"list-table",data:G.value.dataList,border:"",stripe:"","highlight-current-row":"",onSortChange:K,onSelectionChange:n[7]||(n[7]=e=>G.value.batch.selectionDataList=e)},{default:m((()=>[G.value.batch.enable?(C(),c(F,{key:0,type:"selection",width:"40"})):f("v-if",!0),p(F,{prop:"title",label:"职位"}),p(F,{label:"操作",width:"250",align:"center"},{default:m((e=>[p(s,{type:"primary",size:"small",plain:"",onClick:a=>{return t=e.row,void("router"===G.value.formMode?B.push({name:"pagesExampleGeneralJobEdit",params:{id:t.id,department_id:R.params.department_id}}):(G.value.formModeProps.id=t.id,G.value.formModeProps.visible=!0));var t}},{default:m((()=>[U])),_:2},1032,["onClick"]),p(s,{type:"danger",size:"small",plain:"",onClick:a=>{return t=e.row,void J.$confirm(`确认删除「${t.title}」吗？`,"确认信息").then((()=>{J.$api.post("pages_example/job/delete",{id:t.id},{baseURL:"/mock/"}).then((()=>{O(),J.$message.success({message:"模拟删除成功",center:!0})}))})).catch((()=>{}));var t}},{default:m((()=>[D])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[W,G.value.loading]]),p(Q,{"current-page":M(a).page,total:M(a).total,"page-size":M(a).size,"page-sizes":M(a).sizes,layout:M(a).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:q,onCurrentChange:I},null,8,["current-page","total","page-size","page-sizes","layout"])])),_:1}),["dialog","drawer"].includes(G.value.formMode)?(C(),c($,{key:0,id:G.value.formModeProps.id,modelValue:G.value.formModeProps.visible,"onUpdate:modelValue":n[8]||(n[8]=e=>G.value.formModeProps.visible=e),"department-id":e.$route.params.department_id,mode:G.value.formMode,onSuccess:O},null,8,["id","modelValue","department-id","mode"])):f("v-if",!0)])}}});"function"==typeof a&&a(A);var J=e(A,[["__scopeId","data-v-27f541d8"]]);export{J as default};
