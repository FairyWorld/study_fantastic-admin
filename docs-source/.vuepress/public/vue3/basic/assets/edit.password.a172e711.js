
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e}from"./index.356be054.js";import{d as a,a as l,r as s,c as r,e as o,f as d,j as u,l as t,m as p,n,Z as m,q as w,y as i,$ as c,A as f}from"./index.b7fe7d7b.js";const g=i("提交"),h=a({name:"PersonalEditPassword"}),b=Object.assign(h,{setup(a){const u=t(),i=p(),{proxy:h}=f(),b=l(),v=s({password:"",newpassword:"",checkpassword:""}),y=s({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(e,a,l)=>{a!==v.value.newpassword?l(new Error("请确认新密码")):l()}}]});function _(){h.$refs.formRef.validate((e=>{e&&b.editPassword(v.value).then((()=>{h.$message({type:"success",message:"模拟修改成功，请重新登录"}),b.logout().then((()=>{i.push({name:"login",query:{redirect:u.fullPath}})}))})).catch((()=>{}))}))}return(a,l)=>{const s=c,u=n("el-input"),t=n("el-form-item"),p=n("el-form"),i=n("el-col"),f=n("el-row"),h=m,b=n("el-button"),V=e;return w(),r("div",null,[o(s,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),o(h,null,{default:d((()=>[o(f,null,{default:d((()=>[o(i,{md:24,lg:12},{default:d((()=>[o(p,{ref:"formRef",model:v.value,rules:y.value,"label-width":"120px"},{default:d((()=>[o(t,{label:"原密码",prop:"password"},{default:d((()=>[o(u,{modelValue:v.value.password,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value.password=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(t,{label:"新密码",prop:"newpassword"},{default:d((()=>[o(u,{modelValue:v.value.newpassword,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value.newpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1}),o(t,{label:"确认新密码",prop:"checkpassword"},{default:d((()=>[o(u,{modelValue:v.value.checkpassword,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value.checkpassword=e),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),o(V,null,{default:d((()=>[o(b,{type:"primary",size:"large",onClick:_},{default:d((()=>[g])),_:1})])),_:1})])}}});"function"==typeof u&&u(b);export{b as default};
