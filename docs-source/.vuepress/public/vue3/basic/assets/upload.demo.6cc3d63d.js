
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as e,b as t,h as a,j as s}from"./index.d5f01412.js";import{i,r as l,f as n,b as o,e as r,k as d,s as c,g as u,l as p,y as m,z as h,v as g,V as f,j as y,F as v,x,n as b,O as w,P as $,q as k}from"./vendor.9748e354.js";import{_}from"./index.2247f9f8.js";import{_ as j}from"./index.fe75bae1.js";const S={class:"slot"},O=(e=>(m("data-v-506dad6e"),e=e(),h(),e))((()=>c("div",{class:"el-upload__text"},[g("将文件拖到此处，或"),c("em",null,"点击上传")],-1))),z={key:0,class:"el-upload__tip"},I={style:{display:"inline-block"}},C=i({name:"FileUpload"});var U=e(Object.assign(C,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},size:{type:Number,default:2},max:{type:Number,default:3},files:{type:Array,default:()=>[]},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["zip","rar"]}},emits:["on-success"],setup(e,{emit:t}){const a=e,{proxy:s}=f();function i(e){const t=e.name.split("."),i=t[t.length-1],l=a.ext.indexOf(i)>=0,n=e.size/1024/1024<a.size;return l||s.$message.error(`上传文件只支持 ${a.ext.join(" / ")} 格式！`),n||s.$message.error(`上传文件大小不能超过 ${a.size}MB！`),l&&n}function m(){s.$message.warning("文件上传超过限制")}function h(e,a){t("on-success",e,a)}return(t,a)=>{const s=l("el-icon-upload-filled"),g=l("el-icon"),f=l("el-alert"),y=l("el-upload");return n(),o(y,{action:e.action,data:e.data,name:e.name,"before-upload":i,"on-exceed":m,"on-success":h,"file-list":e.files,limit:e.max,drag:""},{tip:r((()=>[e.notip?p("v-if",!0):(n(),d("div",z,[c("div",I,[u(f,{title:`上传文件支持 ${e.ext.join(" / ")} 格式，单个文件大小不超过 ${e.size}MB，且文件数量不超过 ${e.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))])),default:r((()=>[c("div",S,[u(g,{class:"el-icon--upload"},{default:r((()=>[u(s)])),_:1}),O])])),_:1},8,["action","data","name","file-list","limit"])}}}),[["__scopeId","data-v-506dad6e"]]);const V={class:"upload-container"},B={class:"mask"},N={class:"actions"},M=["onClick"],A=["onClick"],T=["onClick"],q=["onClick"],E={key:0,class:"el-upload__tip"},F={style:{display:"inline-block"}},K=i({name:"ImagesUpload"});var L=e(Object.assign(K,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:Array,default:()=>[]},max:{type:Number,default:3},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","on-success"],setup(e,{emit:t}){const a=e,{proxy:s}=f(),i=y({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function m(){i.value.imageViewerVisible=!1}function h(e,s){let i=a.url;"left"==s&&0!=e&&(i[e]=i.splice(e-1,1,i[e])[0]),"right"==s&&e!=i.length-1&&(i[e]=i.splice(e+1,1,i[e])[0]),t("update:url",i)}function g(e){const t=e.name.split("."),l=t[t.length-1],n=a.ext.indexOf(l)>=0,o=e.size/1024/1024<a.size;return n||s.$message.error(`上传图片只支持 ${a.ext.join(" / ")} 格式！`),o||s.$message.error(`上传图片大小不能超过 ${a.size}MB！`),n&&o&&(i.value.progress.preview=URL.createObjectURL(e)),n&&o}function j(e){i.value.progress.percent=~~e.percent}function S(e){i.value.progress.preview="",i.value.progress.percent=0,t("on-success",e)}return(s,f)=>{const y=l("el-image"),O=l("el-icon-zoom-in"),z=l("el-icon"),I=l("el-icon-delete"),C=l("el-icon-back"),U=l("el-icon-right"),K=_,L=l("el-progress"),R=l("el-upload"),P=l("el-alert"),D=l("el-image-viewer");return n(),d("div",V,[(n(!0),d(v,null,x(e.url,((s,l)=>(n(),d("div",{key:l,class:"images"},[l<e.max?(n(),o(y,{key:0,src:s,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):p("v-if",!0),c("div",B,[c("div",N,[c("span",{title:"预览",onClick:e=>function(e){i.value.dialogImageIndex=e,i.value.imageViewerVisible=!0}(l)},[u(z,null,{default:r((()=>[u(O)])),_:1})],8,M),c("span",{title:"移除",onClick:e=>function(e){let s=a.url;s.splice(e,1),t("update:url",s)}(l)},[u(z,null,{default:r((()=>[u(I)])),_:1})],8,A),w(c("span",{title:"左移",class:k({disabled:0==l}),onClick:e=>h(l,"left")},[u(z,null,{default:r((()=>[u(C)])),_:1})],10,T),[[$,e.url.length>1]]),w(c("span",{title:"右移",class:k({disabled:l==e.url.length-1}),onClick:e=>h(l,"right")},[u(z,null,{default:r((()=>[u(U)])),_:1})],10,q),[[$,e.url.length>1]])])])])))),128)),w(u(R,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":g,"on-progress":j,"on-success":S,drag:"",class:"images-upload"},{default:r((()=>[c("div",{class:"image-slot",style:b(`width:${e.width}px;height:${e.height}px;`)},[u(K,{name:"el-icon-plus"})],4),w(c("div",{class:"progress",style:b(`width:${e.width}px;height:${e.height}px;`)},[u(y,{src:i.value.progress.preview,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),u(L,{type:"circle",width:.8*Math.min(e.width,e.height),percentage:i.value.progress.percent},null,8,["width","percentage"])],4),[[$,i.value.progress.percent]])])),_:1},8,["headers","action","data","name"]),[[$,e.url.length<e.max]]),e.notip?p("v-if",!0):(n(),d("div",E,[c("div",F,[u(P,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),i.value.imageViewerVisible?(n(),o(D,{key:1,"url-list":e.url,"initial-index":i.value.dialogImageIndex,onClose:m},null,8,["url-list","initial-index"])):p("v-if",!0)])}}}),[["__scopeId","data-v-b8dc37c2"]]);const R={data:()=>({image:"",images:[],files:[{name:"测试文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]}),mounted(){this.image="https://picsum.photos/400",this.images=["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},methods:{handleSuccess1(e){""==e.error?this.image=e.data.path:this.$message.warning(e.error)},handleSuccess2(e){""==e.error?this.images.push(e.data.path):this.$message.warning(e.error)},handleSuccess3(e,t){this.files.push({name:t.name,url:""==e.error?e.data.path:""}),this.$nextTick((()=>{""!=e.error&&(this.$message.warning(e.error),this.files.pop())}))}}};"function"==typeof t&&t(R);var P=e(R,[["render",function(e,t,i,l,o,c){const p=s,m=j,h=a,g=L,f=U;return n(),d("div",null,[u(p,{title:"上传",content:"ImageUpload / ImagesUpload / FileUpload"}),u(h,{title:"单图上传"},{default:r((()=>[u(m,{url:o.image,"onUpdate:url":t[0]||(t[0]=e=>o.image=e),action:"http://scrm.1daas.com/api/upload/upload",name:"image",width:250,height:150,data:{token:"TKE615916022101558"},onOnSuccess:c.handleSuccess1},null,8,["url","onOnSuccess"])])),_:1}),u(h,{title:"多图上传（默认最多3张）"},{default:r((()=>[u(g,{url:o.images,"onUpdate:url":t[1]||(t[1]=e=>o.images=e),action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKE615916022101558"},onOnSuccess:c.handleSuccess2},null,8,["url","onOnSuccess"])])),_:1}),u(h,{title:"文件上传（默认最多3个）"},{default:r((()=>[u(f,{files:o.files,action:"http://scrm.1daas.com/api/upload/upload",name:"image",data:{token:"TKE615916022101558"},onOnSuccess:c.handleSuccess3},null,8,["files","onOnSuccess"])])),_:1})])}]]);export{P as default};
